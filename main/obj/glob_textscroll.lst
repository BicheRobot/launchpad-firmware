
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\main\obj\glob_textscroll.o:     file format elf32-littlearm
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\main\obj\glob_textscroll.o


Disassembly of section .text.GetColumnData:

00000000 <GetColumnData>:
GetColumnData():
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:32

// ____________________________________________________________________________
//

s16 GetColumnData(u8* charindex, u8* column)
{
   0:	b570      	push	{r4, r5, r6, lr}
   2:	4604      	mov	r4, r0
   4:	460e      	mov	r6, r1
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:40
    u8 character;
    u8 action = FALSE;

    while (!action)
    {
        character = ScrollText[*charindex];
   6:	4d1d      	ldr	r5, [pc, #116]	; (7c <GetColumnData+0x7c>)
   8:	e00a      	b.n	20 <GetColumnData+0x20>
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:49
            // null terminator or invalid character
            return OUT_OF_DATA;
        }
        else if (character < 0x20)
        {
            if (character < SCROLLSPEEDS)
   a:	2b06      	cmp	r3, #6
   c:	d804      	bhi.n	18 <GetColumnData+0x18>
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:51
            {
                TextSpeed = character-1;
   e:	f103 33ff 	add.w	r3, r3, #4294967295
  12:	702b      	strb	r3, [r5, #0]
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:52
				ResetTextTimer();
  14:	f7ff fffe 	bl	0 <ResetTextTimer>
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:54
            }
            (*charindex)++;
  18:	7823      	ldrb	r3, [r4, #0]
  1a:	f103 0301 	add.w	r3, r3, #1
  1e:	7023      	strb	r3, [r4, #0]
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:40
    u8 character;
    u8 action = FALSE;

    while (!action)
    {
        character = ScrollText[*charindex];
  20:	7822      	ldrb	r2, [r4, #0]
  22:	18ab      	adds	r3, r5, r2
  24:	791b      	ldrb	r3, [r3, #4]
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:42

        if (character == 0)
  26:	2b00      	cmp	r3, #0
  28:	d025      	beq.n	76 <GetColumnData+0x76>
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:47
        {
            // null terminator or invalid character
            return OUT_OF_DATA;
        }
        else if (character < 0x20)
  2a:	2b1f      	cmp	r3, #31
  2c:	d9ed      	bls.n	a <GetColumnData+0xa>
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:66
        }
    }

    character -= 0x20; // offset into font table of the current character

    if ((*column) >= font8_width[character])
  2e:	7831      	ldrb	r1, [r6, #0]
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:64
            // break out of the loop
            action = TRUE;
        }
    }

    character -= 0x20; // offset into font table of the current character
  30:	f1a3 0320 	sub.w	r3, r3, #32
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:66

    if ((*column) >= font8_width[character])
  34:	b2db      	uxtb	r3, r3
  36:	4812      	ldr	r0, [pc, #72]	; (80 <GetColumnData+0x80>)
  38:	5cc0      	ldrb	r0, [r0, r3]
  3a:	4281      	cmp	r1, r0
  3c:	d310      	bcc.n	60 <GetColumnData+0x60>
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:70
    {
        // we've fallen off the end of the character.
        // treat this as an interletter space, and go to the next character when we're done.
        if (*column == font8_width[character]+INTER_LETTER_SPACING-1)
  3e:	f100 0001 	add.w	r0, r0, #1
  42:	4281      	cmp	r1, r0
  44:	d106      	bne.n	54 <GetColumnData+0x54>
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:72
        {
            (*charindex)++;
  46:	f102 0201 	add.w	r2, r2, #1
  4a:	7022      	strb	r2, [r4, #0]
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:73
            *column = 0;
  4c:	f04f 0000 	mov.w	r0, #0
  50:	7030      	strb	r0, [r6, #0]
  52:	bd70      	pop	{r4, r5, r6, pc}
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:77
        }
        else
        {
            (*column)++;
  54:	f101 0101 	add.w	r1, r1, #1
  58:	7031      	strb	r1, [r6, #0]
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:79
        }
        return 0x00;
  5a:	f04f 0000 	mov.w	r0, #0
  5e:	bd70      	pop	{r4, r5, r6, pc}
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:84
    }
    else
    {
        // we're still in the character
        pos = font8_index[character];
  60:	4a08      	ldr	r2, [pc, #32]	; (84 <GetColumnData+0x84>)
  62:	f832 3013 	ldrh.w	r3, [r2, r3, lsl #1]
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:86
        pos += *column;
        (*column)++;
  66:	f101 0201 	add.w	r2, r1, #1
  6a:	7032      	strb	r2, [r6, #0]
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:85
    }
    else
    {
        // we're still in the character
        pos = font8_index[character];
        pos += *column;
  6c:	185b      	adds	r3, r3, r1
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:87
        (*column)++;
        return font8_data[pos];
  6e:	b29b      	uxth	r3, r3
  70:	4a05      	ldr	r2, [pc, #20]	; (88 <GetColumnData+0x88>)
  72:	5cd0      	ldrb	r0, [r2, r3]
  74:	bd70      	pop	{r4, r5, r6, pc}
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:45
        character = ScrollText[*charindex];

        if (character == 0)
        {
            // null terminator or invalid character
            return OUT_OF_DATA;
  76:	f44f 5080 	mov.w	r0, #4096	; 0x1000
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:89
        pos = font8_index[character];
        pos += *column;
        (*column)++;
        return font8_data[pos];
    }
}
  7a:	bd70      	pop	{r4, r5, r6, pc}
	...

Disassembly of section .text.PlotColumn:

00000000 <PlotColumn>:
PlotColumn():
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:95

// ____________________________________________________________________________
//

void PlotColumn(u8 ColumnIndex, u8 ColumnBitmap)
{
   0:	e92d 41f0 	stmdb	sp!, {r4, r5, r6, r7, r8, lr}
   4:	4604      	mov	r4, r0
   6:	460d      	mov	r5, r1
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:96
    while (ColumnIndex < 72)
   8:	2847      	cmp	r0, #71	; 0x47
   a:	d818      	bhi.n	3e <PlotColumn+0x3e>
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:98
    {
        Plot(ColumnIndex, (ColumnBitmap & 0x80) ? TextColour : 0, DisplayBank, NORMAL);
   c:	f8df 8038 	ldr.w	r8, [pc, #56]	; 48 <PlotColumn+0x48>
  10:	f04f 0600 	mov.w	r6, #0
  14:	4f0b      	ldr	r7, [pc, #44]	; (44 <PlotColumn+0x44>)
  16:	f015 0f80 	tst.w	r5, #128	; 0x80
  1a:	bf14      	ite	ne
  1c:	f898 1026 	ldrbne.w	r1, [r8, #38]	; 0x26
  20:	4631      	moveq	r1, r6
  22:	4620      	mov	r0, r4
  24:	783a      	ldrb	r2, [r7, #0]
  26:	4633      	mov	r3, r6
  28:	f7ff fffe 	bl	0 <Plot>
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:99
        ColumnIndex += 9;
  2c:	f104 0409 	add.w	r4, r4, #9
  30:	b2e4      	uxtb	r4, r4
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:96
// ____________________________________________________________________________
//

void PlotColumn(u8 ColumnIndex, u8 ColumnBitmap)
{
    while (ColumnIndex < 72)
  32:	2c47      	cmp	r4, #71	; 0x47
  34:	d803      	bhi.n	3e <PlotColumn+0x3e>
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:100
    {
        Plot(ColumnIndex, (ColumnBitmap & 0x80) ? TextColour : 0, DisplayBank, NORMAL);
        ColumnIndex += 9;
        ColumnBitmap <<= 1;
  36:	ea4f 0545 	mov.w	r5, r5, lsl #1
  3a:	b2ed      	uxtb	r5, r5
  3c:	e7eb      	b.n	16 <PlotColumn+0x16>
  3e:	e8bd 81f0 	ldmia.w	sp!, {r4, r5, r6, r7, r8, pc}
  42:	bf00      	nop
	...

Disassembly of section .text.Scroll_Poll:

00000000 <Scroll_Poll>:
Scroll_Poll():
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:108

// ____________________________________________________________________________
//

void Scroll_Poll()
{
   0:	b570      	push	{r4, r5, r6, lr}
   2:	b084      	sub	sp, #16
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:114
    u8 charindex,charcol,i;
    u16 firstdata,data;

    // first column: advance the current (i.e. leftmost) character pointer
    // during GetColumnData
    firstdata = GetColumnData(&ThisCharIndex,&ThisCharCol);
   4:	4d1f      	ldr	r5, [pc, #124]	; (84 <Scroll_Poll+0x84>)
   6:	4c20      	ldr	r4, [pc, #128]	; (88 <Scroll_Poll+0x88>)
   8:	4628      	mov	r0, r5
   a:	4621      	mov	r1, r4
   c:	f7ff fffe 	bl	0 <Scroll_Poll>
  10:	b286      	uxth	r6, r0
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:115
    PlotColumn(0, firstdata);
  12:	f04f 0000 	mov.w	r0, #0
  16:	b2f1      	uxtb	r1, r6
  18:	f7ff fffe 	bl	0 <Scroll_Poll>
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:117

    charindex = ThisCharIndex;
  1c:	782b      	ldrb	r3, [r5, #0]
  1e:	f88d 300f 	strb.w	r3, [sp, #15]
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:118
    charcol = ThisCharCol;
  22:	7823      	ldrb	r3, [r4, #0]
  24:	f88d 300e 	strb.w	r3, [sp, #14]
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:121

    // the rest of the columns
    for (i=1; i<9; i++)
  28:	f04f 0401 	mov.w	r4, #1
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:123
    {
        data = GetColumnData(&charindex, &charcol);
  2c:	f10d 000f 	add.w	r0, sp, #15
  30:	f10d 010e 	add.w	r1, sp, #14
  34:	f7ff fffe 	bl	0 <Scroll_Poll>
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:124
        PlotColumn(i, data);
  38:	b2c1      	uxtb	r1, r0
  3a:	4620      	mov	r0, r4
  3c:	f7ff fffe 	bl	0 <Scroll_Poll>
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:121

    charindex = ThisCharIndex;
    charcol = ThisCharCol;

    // the rest of the columns
    for (i=1; i<9; i++)
  40:	f104 0401 	add.w	r4, r4, #1
  44:	b2e4      	uxtb	r4, r4
  46:	2c09      	cmp	r4, #9
  48:	d1f0      	bne.n	2c <Scroll_Poll+0x2c>
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:127
    {
        data = GetColumnData(&charindex, &charcol);
        PlotColumn(i, data);
    }

    if (firstdata == OUT_OF_DATA)
  4a:	f5b6 5f80 	cmp.w	r6, #4096	; 0x1000
  4e:	d117      	bne.n	80 <Scroll_Poll+0x80>
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:130
    {
        // cancel scrolling when we've finished the message
        fifo_push4(&MIDIToHst[0], 0x0B, 0xB0, 0x00, 0x03);
  50:	f04f 0303 	mov.w	r3, #3
  54:	9300      	str	r3, [sp, #0]
  56:	480d      	ldr	r0, [pc, #52]	; (8c <Scroll_Poll+0x8c>)
  58:	f04f 010b 	mov.w	r1, #11
  5c:	f04f 02b0 	mov.w	r2, #176	; 0xb0
  60:	f04f 0300 	mov.w	r3, #0
  64:	f7ff fffe 	bl	0 <fifo_push4>
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:131
        if (TextLoop)
  68:	4b09      	ldr	r3, [pc, #36]	; (90 <Scroll_Poll+0x90>)
  6a:	781b      	ldrb	r3, [r3, #0]
  6c:	b133      	cbz	r3, 7c <Scroll_Poll+0x7c>
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:133
        {
            ThisCharIndex = 0;
  6e:	f04f 0300 	mov.w	r3, #0
  72:	4a04      	ldr	r2, [pc, #16]	; (84 <Scroll_Poll+0x84>)
  74:	7013      	strb	r3, [r2, #0]
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:134
            ThisCharCol = 0;
  76:	4a04      	ldr	r2, [pc, #16]	; (88 <Scroll_Poll+0x88>)
  78:	7013      	strb	r3, [r2, #0]
  7a:	e001      	b.n	80 <Scroll_Poll+0x80>
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:138
        }
        else
        {
            DisengageVegasAndText();
  7c:	f7ff fffe 	bl	0 <DisengageVegasAndText>
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:141
        }
    }
}
  80:	b004      	add	sp, #16
  82:	bd70      	pop	{r4, r5, r6, pc}
	...

Disassembly of section .text.Scroll_Load:

00000000 <Scroll_Load>:
Scroll_Load():
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:147

// ____________________________________________________________________________
//

extern u8 Scroll_Load(const char* Text, u8 Colour)
{
   0:	b430      	push	{r4, r5}
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:150
    u8 i = 0;

    if ((u8)(Text[i]) == 0xF7) // its an off message
   2:	f990 3000 	ldrsb.w	r3, [r0]
   6:	f113 0f09 	cmn.w	r3, #9
   a:	d104      	bne.n	16 <Scroll_Load+0x16>
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:152
    {
        TextActive = FALSE;
   c:	f04f 0000 	mov.w	r0, #0
  10:	4b14      	ldr	r3, [pc, #80]	; (64 <Scroll_Load+0x64>)
  12:	7018      	strb	r0, [r3, #0]
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:153
        return FALSE;
  14:	e023      	b.n	5e <Scroll_Load+0x5e>
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:156
    }

    TextColour = Colour & 0x3f;
  16:	4d14      	ldr	r5, [pc, #80]	; (68 <Scroll_Load+0x68>)
  18:	f001 033f 	and.w	r3, r1, #63	; 0x3f
  1c:	f885 3026 	strb.w	r3, [r5, #38]	; 0x26
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:157
    TextLoop = (Colour & 0x40) ? TRUE : FALSE;
  20:	f3c1 1180 	ubfx	r1, r1, #6, #1
  24:	4b11      	ldr	r3, [pc, #68]	; (6c <Scroll_Load+0x6c>)
  26:	7019      	strb	r1, [r3, #0]
  28:	f105 0505 	add.w	r5, r5, #5
  2c:	f04f 0300 	mov.w	r3, #0
  30:	b2d9      	uxtb	r1, r3
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:162
    // will stop at a SysEx terminator or a control characte\r
    // we leave the first two leading spaces in the scrolltext.
    while (i < MAXTEXTSCROLLSIZE)
    {
        if (!Text[i] || ((u8)(Text[i]) == 0xF7))
  32:	5cc2      	ldrb	r2, [r0, r3]
  34:	b11a      	cbz	r2, 3e <Scroll_Load+0x3e>
  36:	b254      	sxtb	r4, r2
  38:	f114 0f09 	cmn.w	r4, #9
  3c:	d107      	bne.n	4e <Scroll_Load+0x4e>
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:164
        {
            ScrollText[i+2] = 0;
  3e:	4b0a      	ldr	r3, [pc, #40]	; (68 <Scroll_Load+0x68>)
  40:	1859      	adds	r1, r3, r1
  42:	f04f 0300 	mov.w	r3, #0
  46:	718b      	strb	r3, [r1, #6]
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:174
            ScrollText[i+2] = Text[i];
            i++;
        }
    }

    return TRUE; // message is valid engage text
  48:	f04f 0001 	mov.w	r0, #1
  4c:	e007      	b.n	5e <Scroll_Load+0x5e>
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:169
            ScrollText[i+2] = 0;
            i = MAXTEXTSCROLLSIZE; // terminate the loop
        }
        else
        {
            ScrollText[i+2] = Text[i];
  4e:	f805 2f01 	strb.w	r2, [r5, #1]!
  52:	f103 0301 	add.w	r3, r3, #1
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:160

    TextColour = Colour & 0x3f;
    TextLoop = (Colour & 0x40) ? TRUE : FALSE;
    // will stop at a SysEx terminator or a control characte\r
    // we leave the first two leading spaces in the scrolltext.
    while (i < MAXTEXTSCROLLSIZE)
  56:	2b20      	cmp	r3, #32
  58:	d1ea      	bne.n	30 <Scroll_Load+0x30>
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:174
            ScrollText[i+2] = Text[i];
            i++;
        }
    }

    return TRUE; // message is valid engage text
  5a:	f04f 0001 	mov.w	r0, #1
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:175
}
  5e:	bc30      	pop	{r4, r5}
  60:	4770      	bx	lr
  62:	bf00      	nop
	...

Disassembly of section .text.Scroll_Reset:

00000000 <Scroll_Reset>:
Scroll_Reset():
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:181

// ____________________________________________________________________________
//

void Scroll_Reset()
{
   0:	b508      	push	{r3, lr}
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:183
    // called when scrolling starts
    surface_vegas_blank();      // we don't repaint the screen all at once like Vegas mode
   2:	f7ff fffe 	bl	0 <surface_vegas_blank>
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:185
                                // it's smoother that way! so we blank here.
    ThisCharIndex = 0;
   6:	f04f 0300 	mov.w	r3, #0
   a:	4a04      	ldr	r2, [pc, #16]	; (1c <Scroll_Reset+0x1c>)
   c:	7013      	strb	r3, [r2, #0]
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:186
    ThisCharCol = 0;
   e:	4a04      	ldr	r2, [pc, #16]	; (20 <Scroll_Reset+0x20>)
  10:	7013      	strb	r3, [r2, #0]
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:187
    TextSpeed = 3;
  12:	f04f 0203 	mov.w	r2, #3
  16:	4b03      	ldr	r3, [pc, #12]	; (24 <Scroll_Reset+0x24>)
  18:	701a      	strb	r2, [r3, #0]
C:\Users\rosschisholm\Documents\Work\Sonar Launchpad\common/glob_textscroll.c:188
}
  1a:	bd08      	pop	{r3, pc}
	...
